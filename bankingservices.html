<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>

</head>
<body>
   <section class="container d-md-flex flex-column">
    <center>
        <h1>Welcome to Royal Bank</h1>
        <h1>We are Happy To Serve Our Best Service For You!!!</h1>
        <form action="" class="form-control w-75 p-4 fs-4">
            <label for="accnum">Enter Your Account Number: </label>
            <input id="accnum" class="w-100 fs-6" type="number" placeholder="Enter your account number"> 
            <br>
            <label for="amt">Enter the amount to be deposited / withdraw: </label>
            <input id="amt" class="mt-3 w-100 fs-6" type="number" placeholder="Enter the amount">
            <br>

            <div class="mt-4 d-flex flex-column flex-md-row gap-3 w-100">
                <button onclick="deposition()" type="button" class="btn btn-outline-success w-100">Deposit</button>
                <button type="button" onclick="withdrawal()" class="btn btn-outline-info w-100">Withdraw</button>
            </div>

            <div class="mt-4 d-flex flex-column flex-md-row gap-3 w-100">
                <button type="button" onclick="displaytransaction()" class="btn btn-outline-dark w-100">Trans. Hist</button>
                <button onclick="print()" type="button" class="btn btn-outline-primary w-100">Print</button>
            </div>
        </form>
    </center>
</section>

    <section id="sec" class="container mt-3">

    </section>
    <h3 class="d-inline-block border"></h3>
    <script>
            var accnumber=document.getElementById('accnum');
            var amount=document.getElementById('amt');
            var totalamount=0;
            var transactionhist=[];
            var display=document.getElementById('sec');
            function deposition(){
                let deposited=parseInt(amount.value);
                totalamount+=deposited;
                transactionhist.push({
                    Date:new Date().toLocaleDateString(),
                    Time:new Date().toLocaleTimeString(),
                    amount:`${deposited}`
                })
                console.log(transactionhist)
                amount.value="";
                
            }
            function withdrawal(){
                let withdraw=parseInt(amount.value);
                
                if(totalamount>=withdraw){
                    totalamount-=withdraw;
                    transactionhist.push({
                    Date:new Date().toLocaleDateString(),
                    Time:new Date().toLocaleTimeString(),
                    amount:`-${withdraw}`
                })
console.log(transactionhist)
                }
                else{
                    alert("insufficient balance");
                    return;
                }
                amount.value="";
            }
            function displaytransaction(){
                 display.innerHTML=`
                 <center><h3>Welcome to Royal Bank</h3></center>
                 <h3 class="mt-2">Account number: ${accnumber.value}</h3>`
               transactionhist.forEach((item)=>{
                display.innerHTML+=`
                <div class="d-flex justify-content-between p-3 border-bottom ">
                    <h5>${item.Date}</h5>
                    <h5>${item.Time}</h5>
                    <h5 class="float-end">&#8377 ${item.amount}</h5>
                    </div>
                `
               })
               display.innerHTML+=`
               <h4 class="float-end mt-2">Balance: &#8377 ${totalamount}</h4>
               <br><br><br>
               <center><h3>Thank you for using our Service</h3></center>
               `
            }
            function print(){
                const element = document.getElementById('sec');
    var opt = {
      margin: 0.5,
      filename: 'transaction_history.pdf',
      image: { type: 'jpeg', quality: 0.98 },
      html2canvas: { scale: 2 },
      jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
    };
    html2pdf().from(element).set(opt).save();
            }
        </script>
</body>
</html>